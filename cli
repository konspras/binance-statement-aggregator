#!/usr/bin/env python3

__author__ = "konstantinos.prasopoulos@epfl.ch (konstantinos prasopoulos)"

'''
Work in progress
'''

import os
import sys
from pprint import pprint

import util
import trade_processor as tradep
import transaction_processor as transp
from cfg import trcols, tdcols


def print_results(res, print_info=True):
    print("================= RESULTS =================")
    for res_key in res:
        print(f"\n\n>>>>>>>> {res_key} <<<<<<<<\n")
        for data_key in res[res_key]:
            if data_key != "info" or print_info:
                print(f">> {data_key}")
                pprint(res[res_key][data_key])


def main():
    # TODO: CLI args
    transaction_filepath = "transaction_history.csv"
    order_filepath = "order_history.csv"
    trade_filepath = "trade_history.csv"
    print_info = True

    results = {}
    results["Transaction History"] = transp.process_transaction_history(
        transaction_filepath)
    results["Trade History"] = tradep.process_trade_history(trade_filepath)
    print_results(results, print_info=print_info)


if __name__ == "__main__":
    main()
